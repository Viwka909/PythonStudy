{% extends 'base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - –ú–æ–π –ë–ª–æ–≥{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8">
        <h1 class="mb-4">üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—Ç—ã</h1>
        
        {% for post in posts %}
        <article class="card mb-4">
            <div class="card-body">
                <h2 class="card-title">
                    <a href="{% url 'post_detail' post.slug %}" class="text-decoration-none text-dark">
                        {{ post.title }}
                    </a>
                </h2>
                
                <div class="text-muted mb-3">
                    <small>
                        <i class="fas fa-calendar"></i> –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {{ post.created_at|date:"d.m.Y" }} | 
                        <i class="fas fa-user"></i> –ê–≤—Ç–æ—Ä: {{ post.author.username }} | 
                        <i class="fas fa-folder"></i> –ö–∞—Ç–µ–≥–æ—Ä–∏—è: 
                        <a href="{% url 'category_posts' post.category.slug %}" class="text-decoration-none">
                            {{ post.category.name }}
                        </a>
                    </small>
                </div>
                
                <p class="card-text">{{ post.content|truncatewords:50|linebreaks }}</p>
                
                <div class="d-flex justify-content-between align-items-center">
                    <a href="{% url 'post_detail' post.slug %}" class="btn btn-primary">
                        <i class="fas fa-readme"></i> –ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ
                    </a>
                    <span class="text-muted">
                        <i class="fas fa-comments"></i> {{ post.comments.count }} –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
                    </span>
                </div>
            </div>
        </article>
        {% empty %}
        <div class="alert alert-info">
            <i class="fas fa-info-circle"></i> –ü–æ–∫–∞ –Ω–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤.
        </div>
        {% endfor %}

        <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
        {% if is_paginated %}
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
                {% if page_obj.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.previous_page_number }}">
                        <i class="fas fa-chevron-left"></i> –ù–∞–∑–∞–¥
                    </a>
                </li>
                {% endif %}
                
                <li class="page-item disabled">
                    <span class="page-link">
                        –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}
                    </span>
                </li>
                
                {% if page_obj.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.next_page_number }}">
                        –í–ø–µ—Ä–µ–¥ <i class="fas fa-chevron-right"></i>
                    </a>
                </li>
                {% endif %}
            </ul>
        </nav>
        {% endif %}
    </div>
    
    <div class="col-lg-4">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-folder"></i> –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    {% for category in categories %}
                    <li>
                        <a href="{% url 'category_posts' category.slug %}" class="text-decoration-none">
                            <i class="fas fa-folder"></i> {{ category.name }}
                            <span class="badge bg-secondary">{{ category.post_set.count }}</span>
                        </a>
                    </li>
                    {% empty %}
                    <li>–ù–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h5><i class="fas fa-info-circle"></i> –û –±–ª–æ–≥–µ</h5>
            </div>
            <div class="card-body">
                <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–æ–π –±–ª–æ–≥! –ó–¥–µ—Å—å —è –¥–µ–ª—é—Å—å —Å–≤–æ–∏–º–∏ –º—ã—Å–ª—è–º–∏ –∏ –æ–ø—ã—Ç–æ–º.</p>
                <a href="{% url 'about' %}" class="btn btn-outline-primary btn-sm">
                    –£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}